<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>European Birdwatching Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .background-image {
            background-image: url('https://image.jimcdn.com/app/cms/image/transf/none/path/sa6549607c78f5c11/image/i085c7d187a56151e/version/1482853751/madeira-hummingbird-best-bird-watching-destinations-in-europe-copyright-lukasz-janyst-european-best-destinations-european-best-destinations.jpg');
            background-size: cover;
            background-position: center;
            filter: brightness(0.7);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .chat-container {
            max-width: 1200px;
            height: 85vh;
            border-radius: 1rem;
            backdrop-filter: blur(5px);
            background-color: rgba(31, 41, 55, 0.6);
        }
        .message-input-container {
            backdrop-filter: blur(8px);
        }
        /* Custom scrollbar styles */
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background-color: #4b5563;
            border-radius: 10px;
        }
        .bird-list-container {
            height: 100%;
            overflow-y: auto;
        }
        .transparent-bg {
            background-color: rgba(75, 85, 99, 0.6);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="background-image"></div>
    
    <div class="chat-container flex flex-col shadow-xl p-6 md:flex-row gap-6">

        <div class="flex-1 flex flex-col h-full transparent-bg rounded-xl p-4 shadow-inner">
            <h2 class="text-xl font-bold text-white mb-2">European Birds</h2>
            <div id="bird-list-container" class="bird-list-container transparent-bg text-white rounded-lg p-2 shadow-inner">
                </div>
        </div>

        <div class="flex-[2] flex flex-col h-full transparent-bg rounded-xl p-4 shadow-inner">
            <h1 class="text-3xl font-extrabold text-white mb-4 text-center">Apollo, Bird Expert</h1>

            <div id="chat-messages" class="flex-1 overflow-y-auto space-y-4 p-2 mb-4 chat-messages">
                <div class="flex justify-start">
                    <div class="bg-gray-200/80 text-gray-800 p-4 rounded-xl max-w-[80%] flex items-center space-x-2 bot-message break-words">
                        <img src="https://img.freepik.com/premium-photo/hyperrealistic-portraiture-parrot-with-glasses_899449-28389.jpg" alt="Bot Avatar" class="w-8 h-8 rounded-full">
                        <span>Hello! I'm Apollo, your birdwatching expert in Europe. Ask me about a specific bird, or for general birdwatching tips.</span>
                        <button class="tts-btn ml-2" title="Listen">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="example-queries" class="flex flex-wrap justify-center gap-2 mb-4">
                <button class="px-4 py-2 bg-gray-600/70 text-white rounded-full text-sm hover:bg-gray-500/70 transition duration-200 ease-in-out">What does a European Robin look like?</button>
                <button class="px-4 py-2 bg-gray-600/70 text-white rounded-full text-sm hover:bg-gray-500/70 transition duration-200 ease-in-out">How can I attract birds to my garden?</button>
            </div>

            <div class="message-input-container flex items-center p-2 bg-white/50 rounded-full shadow-lg border border-gray-200">
                <button id="mic-btn" class="flex items-center justify-center bg-red-500/80 text-white w-12 h-12 rounded-full transition duration-200 ease-in-out hover:bg-red-600/80 focus:outline-none focus:ring-2 focus:ring-red-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-14 0v-2a7 7 0 0114 0v2zM12 21a9 9 0 01-9-9h18a9 9 0 01-9 9z" />
                    </svg>
                </button>
                <input type="text" id="user-input" placeholder="Ask a question about birds..." class="flex-1 p-3 bg-transparent outline-none rounded-full text-gray-800">
                <button id="send-btn" class="flex items-center justify-center bg-blue-500/80 text-white w-12 h-12 rounded-full transition duration-200 ease-in-out hover:bg-blue-600/80 focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <span id="send-btn-text" class="hidden">Send</span>
                    <svg id="loading-spinner" class="animate-spin h-5 w-5 text-white" style="display: none;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <svg id="send-icon" class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="flex-1 flex flex-col h-full transparent-bg rounded-xl p-4 shadow-inner gap-4">
            <div class="flex-1 flex flex-col items-center justify-center">
                <h2 class="text-xl font-bold text-white mb-4">Bird Images</h2>
                <div id="image-container" class="w-full h-full flex items-center justify-center bg-gray-500/50 rounded-xl">
                    <span class="p-4 text-white rounded-md bg-white/10 backdrop-blur-md">
                        Prepare for Bird images.
                    </span>
                </div>
                <div id="audio-player-container" class="w-full mb-4" style="display: none;">
                    <audio id="bird-audio-player" controls class="w-full">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>

            <div class="flex-1 flex flex-col items-center justify-start p-4 transparent-bg rounded-xl shadow-inner text-white">
                <h2 class="text-xl font-bold mb-4">Project Information</h2>
                <div class="space-y-2 text-center text-sm">
                    <p>This is a demonstration of a large language model acting as a domain-specific expert using a simple backend. The UI is built with Tailwind CSS.</p>
                    <p>The backend is a simple Python server wrapped in a Docker container.</p>
                    <p>
                        <a href="https://github.com/NicolasSpettel/european-bird-chatbot" class="text-blue-300 underline hover:text-blue-200">GitHub</a> | 
                        <a href="https://smith.langchain.com/o/da3774d7-02f4-436b-968e-e5e25bae8fb9/projects/p/a6ab4304-8a6c-4da3-b8c3-3b05fb5cdf3f?timeModel=%7B%22duration%22%3A%227d%22%7D" class="text-blue-300 underline hover:text-blue-200">LangSmith</a> |
                        <a href="#" class="text-blue-300 underline hover:text-blue-200">LinkedIn</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const loadingSpinner = document.getElementById('loading-spinner');
        const imageContainer = document.getElementById('image-container');
        const audioPlayerContainer = document.getElementById('audio-player-container');
        const birdAudioPlayer = document.getElementById('bird-audio-player');
        const exampleQueries = document.getElementById('example-queries');
        const birdListContainer = document.getElementById('bird-list-container');
        const micBtn = document.getElementById('mic-btn');

        const API_ENDPOINT = '/ask';
        const AUDIO_API_ENDPOINT = '/ask_audio';

        let isRecording = false;
        let mediaRecorder = null;
        let audioChunks = [];

        // Simple Markdown parser for links and images
        const parseMarkdown = (text) => {
            // Replace links: [text](url) -> <a href="url" target="_blank" class="text-blue-300 hover:text-blue-200 underline">${text}</a>
            text = text.replace(/\[([^\]]+)\]\(([^)]+)\)/g, (match, linkText, url) => {
                return `<a href="${url}" target="_blank" class="text-blue-300 hover:text-blue-200 underline">${linkText}</a>`;
            });
            // Replace newlines with <br> for proper line breaks
            text = text.replace(/\n/g, '<br>');
            return text;
        };

        // Reusable function to create and append a message element
        const addMessage = (text, sender, transcription = null) => {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', 'mb-4');
            const messageContent = document.createElement('div');
            messageContent.classList.add('p-4', 'rounded-xl', 'max-w-[80%]', 'break-words');

            let finalContent = transcription ? `<strong>(Transcription)</strong><br>${text}` : text;
            const parsedText = parseMarkdown(finalContent);

            if (sender === 'user') {
                messageDiv.classList.add('justify-end');
                messageContent.classList.add('bg-blue-400/80', 'text-white');
                messageContent.innerHTML = parsedText;
                messageDiv.appendChild(messageContent);
            } else {
                messageDiv.classList.add('justify-start');
                messageContent.classList.add('bg-gray-200/80', 'text-gray-800', 'flex', 'items-center', 'space-x-2');
                messageContent.innerHTML = `
                    <img src="https://img.freepik.com/premium-photo/hyperrealistic-portraiture-parrot-with-glasses_899449-28389.jpg" alt="Bot Avatar" class="w-8 h-8 rounded-full">
                    <span>${parsedText}</span>
                    <button class="tts-btn ml-2" title="Listen">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                messageDiv.appendChild(messageContent);
                
                // Add TTS listener for the newly created button
                const ttsButton = messageDiv.querySelector('.tts-btn');
                if (ttsButton) {
                    ttsButton.addEventListener('click', () => speakMessage(text));
                }
            }
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };
        
        const displayImage = (imageUrl) => {
            if (imageUrl && imageUrl.trim() !== '') {
                console.log('Displaying image:', imageUrl);
                imageContainer.innerHTML = '';
                const imgElement = document.createElement('img');
                imgElement.src = imageUrl;
                imgElement.alt = "Bird image from Wikipedia";
                imgElement.classList.add(
                    'w-full',
                    'h-auto',
                    'object-contain',
                    'rounded-xl',
                    'shadow'
                );
                imageContainer.appendChild(imgElement);
            } else {
                console.log('No image URL provided, showing placeholder');
                imageContainer.innerHTML = `<span class="p-4 text-white rounded-md bg-white/10 backdrop-blur-md">
                    Ask about a specific bird to see its image.
                </span>`;
            }
        };

        const displayAudio = async (audioUrl) => {
            if (audioUrl) {
                audioPlayerContainer.style.display = 'block';
                
                // This check ensures we only apply the fix for the problematic URL structure
                if (audioUrl.includes('xeno-canto.org') && audioUrl.endsWith('/download')) {
                    try {
                        const response = await fetch(audioUrl);
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        // Get the file data as a binary blob
                        const audioBlob = await response.blob();
                        // Create a temporary URL for the blob
                        const blobUrl = URL.createObjectURL(audioBlob);

                        // Assign the new blob URL to the audio player
                        birdAudioPlayer.src = blobUrl;
                        birdAudioPlayer.load();

                        // It's good practice to clean up the temporary URL to prevent memory leaks
                        birdAudioPlayer.onended = () => {
                            URL.revokeObjectURL(blobUrl);
                        };
                    } catch (error) {
                        console.error("Error fetching or processing audio:", error);
                        // Hide the audio player and show an alert on failure
                        audioPlayerContainer.style.display = 'none';
                        birdAudioPlayer.src = '';
                        alert("Sorry, I couldn't load the audio file.");
                    }
                } else {
                    // For other, non-problematic URLs, use the original approach
                    birdAudioPlayer.src = audioUrl;
                    birdAudioPlayer.load();
                }
            } else {
                // Hide the player if no audio URL is provided
                audioPlayerContainer.style.display = 'none';
                birdAudioPlayer.src = '';
            }
        };
        const showLoading = () => {
            sendBtn.innerHTML = `
                <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>`;
            sendBtn.disabled = true;
            userInput.disabled = true;
        };

        const hideLoading = () => {
            sendBtn.innerHTML = `
                <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                </svg>`;
            sendBtn.disabled = false;
            userInput.disabled = false;
        };

        // Text-to-Speech functionality
        const speakMessage = (text) => {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                window.speechSynthesis.speak(utterance);
            } else {
                console.warn("Text-to-Speech API is not supported in this browser.");
            }
        };
        
        // --- Web Speech API for audio input ---
        micBtn.addEventListener('click', async () => {
            if (isRecording) {
                mediaRecorder.stop();
                isRecording = false;
                micBtn.classList.remove('bg-red-600/80');
                micBtn.classList.add('bg-red-500/80');
            } else {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];
                    mediaRecorder.ondataavailable = event => audioChunks.push(event.data);
                    mediaRecorder.onstop = () => sendAudioMessage(new Blob(audioChunks, { type: 'audio/wav' }));
                    mediaRecorder.start();
                    isRecording = true;
                    micBtn.classList.remove('bg-red-500/80');
                    micBtn.classList.add('bg-red-600/80');
                } catch (err) {
                    console.error('Error accessing microphone:', err);
                    alert('Microphone access denied. Please enable it to use this feature.');
                }
            }
        });

        const sendAudioMessage = async (audioBlob) => {
            showLoading();
            const formData = new FormData();
            formData.append('audio', audioBlob, 'audio.wav');
            
            try {
                const response = await fetch(AUDIO_API_ENDPOINT, {
                    method: 'POST',
                    body: formData,
                });
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const data = await response.json();
                hideLoading();
                
                // Add transcription as a user message
                if (data.transcription) {
                    addMessage(data.transcription, 'user', true);
                }

                // Check if we have a description (tool response) or just a general response
                const messageText = data.response;
                addMessage(messageText, 'bot');
                
                // Update image and audio only if URLs are provided
                if (data.image_url) {
                    displayImage(data.image_url);
                }
                
                if (data.audio_url) {
                    displayAudio(data.audio_url);
                }

            } catch (error) {
                console.error('Error fetching bot response with audio:', error);
                hideLoading();
                addMessage("Sorry, I couldn't process the audio. Please check your backend.", 'bot');
            }
        };

        // --- Text input and event handling ---
        const sendMessage = async () => {
            const message = userInput.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            userInput.value = '';
            showLoading();

            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: message }),
                });

                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                const data = await response.json();
                hideLoading();
                
                console.log('Backend response:', data); // Debug log
                
                // The response text should always be displayed in the chat
                const messageText = data.response;
                addMessage(messageText, 'bot');
                
                // Update image and audio only if URLs are provided
                if (data.image_url) {
                    displayImage(data.image_url);
                } else {
                    // Clear image if no URL provided
                    displayImage('');
                }
                
                if (data.audio_url) {
                    displayAudio(data.audio_url);
                } else {
                    // Clear audio if no URL provided
                    displayAudio('');
                }

            } catch (error) {
                console.error('Error fetching bot response:', error);
                hideLoading();
                addMessage("Sorry, I couldn't connect to the server. Please check the backend.", 'bot');
            }
        };

        // --- Bird List and Examples ---
        const birds = ["Mute Swan", "Whooper Swan", "Bewick's Swan", "Greylag Goose", "Canada Goose", "Barnacle Goose", "Egyptian Goose", "Shelduck", "Mallard", "Gadwall", "Teal", "Pintail", "Shoveler", "Pochard", "Tufted Duck", "Scaup", "Eider", "Long-tailed Duck", "Goldeneye", "Smew", "Red-breasted Merganser", "Goosander", "Velvet Scoter", "Common Pheasant", "Grey Partridge", "Red-legged Partridge", "Common Quail", "Little Grebe", "Great Crested Grebe", "Red-necked Grebe", "Slavonian Grebe", "Black-necked Grebe", "Rock Dove", "Stock Dove", "Wood Pigeon", "Collared Dove", "Turtle Dove", "Common Cuckoo", "Nightjar", "Common Swift", "Pallid Swift", "Alpine Swift", "Water Rail", "Spotted Crake", "Corn Crake", "Moorhen", "Coot", "Common Crane", "Great Bustard", "Little Bustard", "Eurasian Oystercatcher", "Northern Lapwing", "Little Ringed Plover", "Ringed Plover", "Kentish Plover", "Golden Plover", "Grey Plover", "Dotterel", "Common Snipe", "Jack Snipe", "Woodcock", "Black-tailed Godwit", "Bar-tailed Godwit", "Whimbrel", "Curlew", "Spotted Redshank", "Redshank", "Greenshank", "Green Sandpiper", "Wood Sandpiper", "Common Sandpiper", "Turnstone", "Knot", "Sanderling", "Little Stint", "Temminck's Stint", "Dunlin", "Ruff", "Avocet", "Great Skua", "Arctic Skua", "Pomarine Skua", "Long-tailed Skua", "Mediterranean Gull", "Black-headed Gull", "Little Gull", "Common Gull", "Lesser Black-backed Gull", "Herring Gull", "Yellow-legged Gull", "Great Black-backed Gull", "Kittiwake", "Sabine's Gull", "Ivory Gull", "Glaucous Gull", "Little Tern", "Sandwich Tern", "Common Tern", "Arctic Tern", "Roseate Tern", "Black Tern", "White-winged Black Tern", "Guillemot", "Razorbill", "Black Guillemot", "Little Auk", "Puffin", "White Stork", "Black Stork", "Great Bittern", "Little Bittern", "Grey Heron", "Purple Heron", "Great Egret", "Little Egret", "Cattle Egret", "Squacco Heron", "Night Heron", "Glossy Ibis", "Spoonbill", "Honey Buzzard", "Black Kite", "Red Kite", "White-tailed Eagle", "Golden Eagle", "Short-toed Eagle", "Marsh Harrier", "Hen Harrier", "Montagu's Harrier", "Goshawk", "Sparrowhawk", "Buzzard", "Rough-legged Buzzard", "Osprey", "Kestrel", "Red-footed Falcon", "Merlin", "Hobby", "Peregrine Falcon", "Barn Owl", "Scops Owl", "Eagle Owl", "Tawny Owl", "Long-eared Owl", "Short-eared Owl", "Little Owl", "Pygmy Owl", "Common Kingfisher", "Wryneck", "Green Woodpecker", "Great Spotted Woodpecker", "Middle Spotted Woodpecker", "Lesser Spotted Woodpecker", "Black Woodpecker", "Grey-headed Woodpecker", "Woodlark", "Skylark", "Crested Lark", "Shore Lark", "Sand Martin", "Swallow", "House Martin", "Red-rumped Swallow", "Tree Pipit", "Meadow Pipit", "Rock Pipit", "Water Pipit", "White Wagtail", "Grey Wagtail", "Yellow Wagtail", "Waxwing", "White-throated Dipper", "Eurasian Wren", "Dunnock", "European Robin", "Common Nightingale", "Bluethroat", "Redstart", "Black Redstart", "Stonechat", "Whinchat", "Wheatear", "Ring Ouzel", "Blackbird", "Fieldfare", "Song Thrush", "Redwing", "Mistle Thrush", "Cetti's Warbler", "Sedge Warbler", "Reed Warbler", "Marsh Warbler", "Icterine Warbler", "Willow Warbler", "Common Chiffchaff", "Wood Warbler", "Greenish Warbler", "Arctic Warbler", "Bonelli's Warbler", "Garden Warbler", "Blackcap", "Lesser Whitethroat", "Common Whitethroat", "Dartford Warbler", "Subalpine Warbler", "Sardinian Warbler", "Melodious Warbler", "Spotted Flycatcher", "Pied Flycatcher", "Collared Flycatcher", "Red-breasted Flycatcher", "Coal Tit", "Marsh Tit", "Willow Tit", "Crested Tit", "Blue Tit", "Great Tit", "Long-tailed Tit", "Eurasian Nuthatch", "Eurasian Treecreeper", "Short-toed Treecreeper", "Red-backed Shrike", "Lesser Grey Shrike", "Woodchat Shrike", "Eurasian Jay", "Magpie", "Spotted Nutcracker", "Chough", "Jackdaw", "Rook", "Carrion Crow", "Hooded Crow", "Raven", "European Starling", "Rose-coloured Starling", "House Sparrow", "Tree Sparrow", "Chaffinch", "Brambling", "Hawfinch", "Greenfinch", "Goldfinch", "Siskin", "Linnet", "Twite", "Common Redpoll", "Arctic Redpoll", "Two-barred Crossbill", "Common Crossbill", "Parrot Crossbill", "Bullfinch", "Yellowhammer", "Cirl Bunting", "Rock Bunting", "Ortolan Bunting", "Reed Bunting", "Corn Bunting", "Lapland Bunting", "Snow Bunting", "Bearded Reedling", "Penduline Tit", "Golden Oriole", "Hoopoe", "Hawfinch", "Wryneck"];
        
        const renderBirdList = () => {
            birds.forEach(bird => {
                const birdButton = document.createElement('button');
                birdButton.classList.add('block', 'w-full', 'px-4', 'py-2', 'mb-1', 'bg-gray-700/60', 'text-white', 'rounded-lg', 'text-left', 'hover:bg-gray-600/60', 'transition', 'duration-200', 'ease-in-out');
                birdButton.textContent = bird;
                birdListContainer.appendChild(birdButton);
            });
        };
        
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keydown', (event) => { if (event.key === 'Enter') sendMessage(); });
        exampleQueries.addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                userInput.value = event.target.textContent.trim();
                sendMessage();
            }
        });
        birdListContainer.addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                userInput.value = event.target.textContent.trim();
                sendMessage();
            }
        });
        renderBirdList();
    });
</script>
</body>
</html>